<?php
require_once dirname(__FILE__) . '/abstract_telephone_api.php';

/**
 * yalecom telephone API implementation
 *
 * YALECOM_TELEPHONE_API, ID: 6213
 *
 * Required Fields:
 *
 * * URL
 * * Extra Info
 *
 * Field Values:
 *
 * * Live URL: https://yalecom.co.th/tel
 * * Key: ## key ##
 * * Extra Info
 * > {
 * >    "yalecom_op" : "dialv2",
 * >	"yalecom_default_ext" : "## extension X ##"
 * > }
 *
 * For yalecom_ext, fill in the ext numbers and a random one will be assigned to each URL.
 *
 * @category Telephone
 * @copyright 2013-2022 tot
 */
class Telephone_api_yalecom extends Abstract_telephone_api {

	public function getPlatformCode() {
		return YALECOM_TELEPHONE_API;
	}

	public function getCallUrl($phoneNumber, $callerId = '') {
		$country_code = $this->getSystemInfo('yalecom_country_code');
		$callUrl = $this->getSystemInfo('url') . ':' . $country_code.$phoneNumber;
		$this->utils->debug_log("Call URL generated by yalecom: ", $phoneNumber);

		return array(
			'success' => true,
			'type' => self::REDIRECT_TYPE_GET_URL,
			'url' => $callUrl
		);
	}
}