/*
 jQuery Form Plugin
 version: 3.20 (20-NOV-2012)
 @requires jQuery v1.5 or later

 Examples and documentation at: http://malsup.com/jquery/form/
 Project repository: https://github.com/malsup/form
 Dual licensed under the MIT and GPL licenses:
    http://malsup.github.com/mit-license.txt
    http://malsup.github.com/gpl-license-v2.txt
*/
(function(b){function x(a){var g=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(this).ajaxSubmit(g))}function C(a){var g=a.target,d=b(g);if(!d.is("[type=submit],[type=image]")){g=d.closest("[type=submit]");if(0===g.length)return;g=g[0]}var c=this;c.clk=g;"image"==g.type&&(void 0!==a.offsetX?(c.clk_x=a.offsetX,c.clk_y=a.offsetY):"function"==typeof b.fn.offset?(d=d.offset(),c.clk_x=a.pageX-d.left,c.clk_y=a.pageY-d.top):(c.clk_x=a.pageX-g.offsetLeft,c.clk_y=a.pageY-g.offsetTop));setTimeout(function(){c.clk=
    c.clk_x=c.clk_y=null},100)}function t(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var D=void 0!==b("<input type='file'/>").get(0).files;var F=void 0!==window.FormData;b.fn.ajaxSubmit=function(a){function g(a){a=b.param(a).split("&");var c=a.length,g={},d;for(d=0;d<c;d++){var k=a[d].split("=");g[decodeURIComponent(k[0])]=decodeURIComponent(k[1])}return g}
    function d(c){for(var d=new FormData,k=0;k<c.length;k++)d.append(c[k].name,c[k].value);if(a.extraData){c=g(a.extraData);for(var f in c)c.hasOwnProperty(f)&&d.append(f,c[f])}a.data=null;f=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:m||"POST"});a.uploadProgress&&(f.xhr=function(){var b=jQuery.ajaxSettings.xhr();b.upload&&(b.upload.onprogress=function(b){var c=0,d=b.loaded||b.position,g=b.total;b.lengthComputable&&(c=Math.ceil(d/g*100));a.uploadProgress(b,d,g,c)});return b});
        f.data=null;var l=f.beforeSend;f.beforeSend=function(a,b){b.data=d;l&&l.call(this,a,b)};return b.ajax(f)}function c(c){function d(){function a(){try{var b=(r.contentWindow?r.contentWindow.document:r.contentDocument?r.contentDocument:r.document).readyState;t("state = "+b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(H){t("Server abort: ",H," (",H.name,")"),g(2),v&&clearTimeout(v),v=void 0}}var c=k.attr("target"),d=k.attr("action");f.setAttribute("target",x);m||f.setAttribute("method",
        "POST");d!=e.url&&f.setAttribute("action",e.url);e.skipEncodingOverride||m&&!/post/i.test(m)||k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&(v=setTimeout(function(){q=!0;g(1)},e.timeout));var h=[];try{if(e.extraData)for(var l in e.extraData)e.extraData.hasOwnProperty(l)&&(b.isPlainObject(e.extraData[l])&&e.extraData[l].hasOwnProperty("name")&&e.extraData[l].hasOwnProperty("value")?h.push(b('<input type="hidden" name="'+e.extraData[l].name+'">').attr("value",e.extraData[l].value).appendTo(f)[0]):
        h.push(b('<input type="hidden" name="'+l+'">').attr("value",e.extraData[l]).appendTo(f)[0]));e.iframeTarget||(z.appendTo("body"),r.attachEvent?r.attachEvent("onload",g):r.addEventListener("load",g,!1));setTimeout(a,15);f.submit()}finally{f.setAttribute("action",d),c?f.setAttribute("target",c):k.removeAttr("target"),b(h).remove()}}function g(a){if(!h.aborted&&!G){try{u=r.contentWindow?r.contentWindow.document:r.contentDocument?r.contentDocument:r.document}catch(B){t("cannot access response document: ",
        B),a=2}if(1===a&&h)h.abort("timeout"),w.reject(h,"timeout");else if(2==a&&h)h.abort("server abort"),w.reject(h,"error","server abort");else if(u&&u.location.href!=e.iframeSrc||q){r.detachEvent?r.detachEvent("onload",g):r.removeEventListener("load",g,!1);a="success";var c;try{if(q)throw"timeout";var f="xml"==e.dataType||u.XMLDocument||b.isXMLDoc(u);t("isXml="+f);if(!f&&window.opera&&(null===u.body||!u.body.innerHTML)&&--C){t("requeing onLoad callback, DOM not available");setTimeout(g,250);return}var d=
        u.body?u.body:u.documentElement;h.responseText=d?d.innerHTML:null;h.responseXML=u.XMLDocument?u.XMLDocument:u;f&&(e.dataType="xml");h.getResponseHeader=function(a){return{"content-type":e.dataType}[a]};d&&(h.status=Number(d.getAttribute("status"))||h.status,h.statusText=d.getAttribute("statusText")||h.statusText);var k=(e.dataType||"").toLowerCase(),l=/(json|script|text)/.test(k);if(l||e.textarea){var m=u.getElementsByTagName("textarea")[0];if(m)h.responseText=m.value,h.status=Number(m.getAttribute("status"))||
        h.status,h.statusText=m.getAttribute("statusText")||h.statusText;else if(l){var E=u.getElementsByTagName("pre")[0],p=u.getElementsByTagName("body")[0];E?h.responseText=E.textContent?E.textContent:E.innerText:p&&(h.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==k&&!h.responseXML&&h.responseText&&(h.responseXML=D(h.responseText));try{A=I(h,k,e)}catch(B){a="parsererror",h.error=c=B||a}}catch(B){t("error caught: ",B),a="error",h.error=c=B||a}h.aborted&&(t("upload aborted"),a=null);
        h.status&&(a=200<=h.status&&300>h.status||304===h.status?"success":"error");"success"===a?(e.success&&e.success.call(e.context,A,"success",h),w.resolve(h.responseText,"success",h),n&&b.event.trigger("ajaxSuccess",[h,e])):a&&(void 0===c&&(c=h.statusText),e.error&&e.error.call(e.context,h,a,c),w.reject(h,"error",c),n&&b.event.trigger("ajaxError",[h,e,c]));n&&b.event.trigger("ajaxComplete",[h,e]);n&&!--b.active&&b.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,h,a);G=!0;e.timeout&&clearTimeout(v);
        setTimeout(function(){e.iframeTarget||z.remove();h.responseXML=null},100)}}}var f=k[0],l,n,q,v;var y=!!b.fn.prop;var w=b.Deferred();if(b("[name=submit],[id=submit]",f).length)return alert('Error: Form elements must not have name or id of "submit".'),w.reject(),w;if(c)for(l=0;l<p.length;l++)c=b(p[l]),y?c.prop("disabled",!1):c.removeAttr("disabled");var e=b.extend(!0,{},b.ajaxSettings,a);e.context=e.context||e;var x="jqFormIO"+(new Date).getTime();if(e.iframeTarget){var z=b(e.iframeTarget);(c=z.attr("name"))?
        x=c:z.attr("name",x)}else z=b('<iframe name="'+x+'" src="'+e.iframeSrc+'" />'),z.css({position:"absolute",top:"-1000px",left:"-1000px"});var r=z[0];var h={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";t("aborting upload... "+c);this.aborted=1;if(r.contentWindow.document.execCommand)try{r.contentWindow.document.execCommand("Stop")}catch(J){}z.attr("src",
        e.iframeSrc);h.error=c;e.error&&e.error.call(e.context,h,c,a);n&&b.event.trigger("ajaxError",[h,e,c]);e.complete&&e.complete.call(e.context,h,c)}};(n=e.global)&&0===b.active++&&b.event.trigger("ajaxStart");n&&b.event.trigger("ajaxSend",[h,e]);if(e.beforeSend&&!1===e.beforeSend.call(e.context,h,e))return e.global&&b.active--,w.reject(),w;if(h.aborted)return w.reject(),w;(y=f.clk)&&(c=y.name)&&!y.disabled&&(e.extraData=e.extraData||{},e.extraData[c]=y.value,"image"==y.type&&(e.extraData[c+".x"]=f.clk_x,
        e.extraData[c+".y"]=f.clk_y));y=b("meta[name=csrf-token]").attr("content");(c=b("meta[name=csrf-param]").attr("content"))&&y&&(e.extraData=e.extraData||{},e.extraData[c]=y);e.forceSync?d():setTimeout(d,10);var A,u,C=50,G,D=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},F=b.parseJSON||function(a){return window.eval("("+
        a+")")},I=function(a,c,e){var d=a.getResponseHeader("content-type")||"",f="xml"===c||!c&&0<=d.indexOf("xml");a=f?a.responseXML:a.responseText;f&&"parsererror"===a.documentElement.nodeName&&b.error&&b.error("parsererror");e&&e.dataFilter&&(a=e.dataFilter(a,c));"string"===typeof a&&("json"===c||!c&&0<=d.indexOf("json")?a=F(a):("script"===c||!c&&0<=d.indexOf("javascript"))&&b.globalEval(a));return a};return w}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;
    var k=this;"function"==typeof a&&(a={success:a});var m=this.attr("method");var f=this.attr("action");(f=(f="string"===typeof f?b.trim(f):"")||window.location.href||"")&&(f=(f.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:f,success:b.ajaxSettings.success,type:m||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);f={};this.trigger("form-pre-serialize",[this,a,f]);if(f.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&
        !1===a.beforeSerialize(this,a))return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=a.traditional;void 0===n&&(n=b.ajaxSettings.traditional);var p=[],l=this.formToArray(a.semantic,p);if(a.data){a.extraData=a.data;var q=b.param(a.data,n)}if(a.beforeSubmit&&!1===a.beforeSubmit(l,this,a))return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[l,this,a,f]);if(f.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),
        this;f=b.param(l,n);q&&(f=f?f+"&"+q:q);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+f,a.data=null):a.data=f;var v=[];a.resetForm&&v.push(function(){k.resetForm()});a.clearForm&&v.push(function(){k.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var x=a.success||function(){};v.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(x,arguments)})}else a.success&&v.push(a.success);a.success=function(b,c,d){for(var f=a.context||this,g=0,l=v.length;g<
    l;g++)v[g].apply(f,[b,c,d||k,k])};q=0<b('input[type=file]:enabled[value!=""]',this).length;f="multipart/form-data"==k.attr("enctype")||"multipart/form-data"==k.attr("encoding");n=D&&F;t("fileAPI :"+n);var A;!1!==a.iframe&&(a.iframe||(q||f)&&!n)?a.closeKeepAlive?b.get(a.closeKeepAlive,function(){A=c(l)}):A=c(l):A=(q||f)&&n?d(l):b.ajax(a);k.removeData("jqxhr").data("jqxhr",A);for(q=0;q<p.length;q++)p[q]=null;this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){a=a||{};
    a.delegation=a.delegation&&b.isFunction(b.fn.on);if(!a.delegation&&0===this.length){var g=this.selector,d=this.context;if(!b.isReady&&g)return t("DOM not ready, queuing ajaxForm"),b(function(){b(g,d).ajaxForm(a)}),this;t("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return a.delegation?(b(document).off("submit.form-plugin",this.selector,x).off("click.form-plugin",this.selector,C).on("submit.form-plugin",this.selector,a,x).on("click.form-plugin",this.selector,
        a,C),this):this.ajaxFormUnbind().bind("submit.form-plugin",a,x).bind("click.form-plugin",a,C)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,g){var d=[];if(0===this.length)return d;var c=this[0],k=a?c.getElementsByTagName("*"):c.elements;if(!k)return d;var m,f,n;var p=0;for(n=k.length;p<n;p++){var l=k[p];if(m=l.name)if(a&&c.clk&&"image"==l.type)l.disabled||c.clk!=l||(d.push({name:m,value:b(l).val(),type:l.type}),d.push({name:m+
".x",value:c.clk_x},{name:m+".y",value:c.clk_y}));else if((f=b.fieldValue(l,!0))&&f.constructor==Array){g&&g.push(l);var q=0;for(l=f.length;q<l;q++)d.push({name:m,value:f[q]})}else if(D&&"file"==l.type&&!l.disabled)if(g&&g.push(l),f=l.files,f.length)for(q=0;q<f.length;q++)d.push({name:m,value:f[q],type:l.type});else d.push({name:m,value:"",type:l.type});else null!==f&&"undefined"!=typeof f&&(g&&g.push(l),d.push({name:m,value:f,type:l.type,required:l.required}))}!a&&c.clk&&(k=b(c.clk),p=k[0],(m=p.name)&&
!p.disabled&&"image"==p.type&&(d.push({name:m,value:k.val()}),d.push({name:m+".x",value:c.clk_x},{name:m+".y",value:c.clk_y})));return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var g=[];this.each(function(){var d=this.name;if(d){var c=b.fieldValue(this,a);if(c&&c.constructor==Array)for(var k=0,m=c.length;k<m;k++)g.push({name:d,value:c[k]});else null!==c&&"undefined"!=typeof c&&g.push({name:this.name,value:c})}});return b.param(g)};b.fn.fieldValue=
    function(a){for(var g=[],d=0,c=this.length;d<c;d++){var k=b.fieldValue(this[d],a);null===k||"undefined"==typeof k||k.constructor==Array&&!k.length||(k.constructor==Array?b.merge(g,k):g.push(k))}return g};b.fieldValue=function(a,g){var d=a.name,c=a.type,k=a.tagName.toLowerCase();void 0===g&&(g=!0);if(g&&(!d||a.disabled||"reset"==c||"button"==c||("checkbox"==c||"radio"==c)&&!a.checked||("submit"==c||"image"==c)&&a.form&&a.form.clk!=a||"select"==k&&-1==a.selectedIndex))return null;if("select"==k){var m=
    a.selectedIndex;if(0>m)return null;d=[];k=a.options;var f=(c="select-one"==c)?m+1:k.length;for(m=c?m:0;m<f;m++){var n=k[m];if(n.selected){var p=n.value;p||(p=n.attributes&&n.attributes.value&&!n.attributes.value.specified?n.text:n.value);if(c)return p;d.push(p)}}return d}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
    return this.each(function(){var d=this.type,c=this.tagName.toLowerCase();g.test(d)||"textarea"==c?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==c?this.selectedIndex=-1:a&&(!0===a&&/hidden/.test(d)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=
    !a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var g=this.type;"checkbox"==g||"radio"==g?this.checked=a:"option"==this.tagName.toLowerCase()&&(g=b(this).parent("select"),a&&g[0]&&"select-one"==g[0].type&&g.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1})(jQuery);